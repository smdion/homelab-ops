# Rendered by deploy_stacks.yaml — do not edit manually
# Stack: monitoring | Host: {{ inventory_hostname }}

## Global
MEM_LIMIT={{ docker_mem_limit }}
RESTART={{ docker_restart }}
TZ={{ docker_tz }}
APPSDIR={{ docker_appsdir }}

## Container Images
VM_IMAGE={{ container_definitions.victoria_metrics.image }}
VM_TAG={{ container_definitions.victoria_metrics.tag }}
GRAFANA_IMAGE={{ container_definitions.grafana.image }}
GRAFANA_TAG={{ container_definitions.grafana.tag }}

## Grafana
GRAFANA_SERVER_ROOT_URL=https://grafana.{{ domain_ext }}
GRAFANA_SECURITY_ADMIN_PASSWORD={{ docker_grafana_admin_password }}
GRAFANA_OAUTH_ENABLED=true
GRAFANA_OAUTH_AUTO_LOGIN=true
GRAFANA_OAUTH_CLIENT_ID={{ docker_grafana_oauth_client_id }}
GRAFANA_OAUTH_CLIENT_SECRET={{ docker_grafana_oauth_client_secret }}
GRAFANA_OAUTH_SCOPES=openid profile email groups
GRAFANA_SIGNOUT_REDIRECT_URL=https://auth.{{ domain_ext }}/application/o/grafana/end-session/
GRAFANA_ROLE_ATTRIBUTE_PATH=contains(groups, 'Grafana-Admin') && 'Admin' || contains(groups, 'Grafana-Editor') && 'Editor' || 'Viewer'
GRAFANA_GROUPS_ATTRIBUTE_PATH=groups

## Grafana — OAuth URLs (Authentik provider)
OAUTH_NAME=authentik
OAUTH_AUTH_URL=https://auth.{{ domain_ext }}/application/o/authorize/
OAUTH_TOKEN_URL=https://auth.{{ domain_ext }}/application/o/token/
OAUTH_API_URL=https://auth.{{ domain_ext }}/application/o/userinfo/
