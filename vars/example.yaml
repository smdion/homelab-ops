# vars/example.yaml — template for creating a new platform vars file
#
# Copy to vars/<your_platform>.yaml and fill in the values for your environment.
# This file is loaded by playbooks via:  vars_files: vars/{{ config_file }}.yaml
#
# Not all variables are needed by every playbook. See the sections below.
#
# =============================================================================
# WHAT BELONGS IN vars/secrets.yaml (vault) vs HERE
# =============================================================================
# This repo is public. Only vault things that are genuinely sensitive:
#   - Passwords, API keys, auth tokens
#   - Private IPs, internal hostnames/FQDNs, internal subnets
#   - Private domain names (if you want to keep them off GitHub)
#
# Things that do NOT need to be in vault:
#   - Display names, descriptions, labels
#   - Non-sensitive paths and file names
#   - Feature flags (enable_feature: true)
#   - Count/threshold values (versions_to_keep: 2)
#   - Cron expressions, delays, timeouts
#   - Public-domain URLs (vendor portals, public UI like unifi.ui.com)
#   - Docker image names and tags
#
# The stricter the vault, the harder secrets rotation audits become.
# Keep vault focused on secrets; put everything else in the platform vars file.

# =============================================================================
# BACKUP SETTINGS — used by backup_hosts.yaml
# =============================================================================

# Directories on the remote host to include in the backup archive
src_raw_files:
  - "/etc"
  - "/opt/myapp"

# Temporary directory on the remote host (used during archive creation).
# Defaults to "/backup" via group_vars/all.yaml — only set here to override.
# Use "/tmp/backup" for hosts without a dedicated /backup partition.
# Use "/mnt/user/Backup/ansibletemp/" for unRAID hosts.
# backup_tmp_dir: "/tmp/backup"

# Display name for this platform in the database (backups.application column)
backup_name: "MyApp"

# URL shown in Discord notification embeds (clickable link to the host's web UI)
# Defaults to https://<hostname>.<domain> via group_vars/all.yaml
# Override here only if the host uses a different URL (e.g., "https://unifi.ui.com/")
# Set to "" if the host has no web UI
# backup_url: ""

# Discord notification description text
backup_description: "Automatic MyApp Backup"

# Category for Grafana filtering — "Appliances" or "Servers"
#   Appliances = purpose-built gear (Proxmox, PiKVM, Unifi, etc.)
#   Servers    = general-purpose hosts (Docker, Ubuntu, databases, etc.)
# Defaults to "Servers" via group_vars/all.yaml — only set here to override.
# backup_type: "Appliances"

# Subcategory — "Config", "Appdata", "Database", or "Offline"
backup_subtype: "Config"

# Backup filename pattern (date-stamped so same-day reruns overwrite)
# For database vars files, include {{ item }} so each DB gets a unique filename.
backup_file: "backup_myapp_config_{{ ansible_date_time.date }}.tar.gz"

# =============================================================================
# UPDATE SETTINGS — used by update_systems.yaml
# =============================================================================

# Display name for this platform in the database (updates.application column)
# Can differ from backup_name (see Proxmox in DESIGN.md for why)
update_name: "MyApp"

# Discord notification description text
update_description: "Automatic MyApp Update"

# Category — same "Appliances" / "Servers" convention as backups.
# Defaults to "Servers" via group_vars/all.yaml — only set here to override.
# update_type: "Appliances"

# Subcategory — e.g., "OS", "Container", "PVE", "PBS", "KVM", "Game Server"
update_subtype: "OS"

# =============================================================================
# DOCKER-SPECIFIC — only for docker_stacks / docker_run vars files
# =============================================================================

# Days to delay container updates after image publish (0 = update immediately)
# update_delay_days: 3

# Containers to skip during updates (list of service/container names)
# update_exclude_services:     # for docker compose hosts
#   - semaphore
# update_exclude_containers:   # for docker run / unRAID hosts
#   - semaphore
#   - mariadb

# Containers to keep running during backup (never stopped/started by backup_hosts.yaml)
# backup_exclude_containers:   # for docker run / unRAID hosts
#   - ansible
#   - semaphore
#   - mariadb

# Directories excluded from the appdata archive (backup_hosts.yaml).
# Only for dirs that have dedicated backup jobs (SQL dumps or API exports).
# backup_exclude_dirs:
#   - /opt/mariadb
#   - /opt/postgres

# =============================================================================
# MAINTENANCE SETTINGS — deployment-specific values used by maintain_*.yaml
# =============================================================================
# Only deployment-specific values (URLs, paths, thresholds) go here.
# Operation metadata (maintenance_name, _type, _subtype, _description) stays in the playbook.

# URL for Discord embed links (clickable title in maintenance failure alerts)
# Defaults to https://<hostname>.<domain> in most playbooks; override here if different
# maintenance_url: "https://unifi.ui.com/"

# Application-specific paths and settings (examples from maintain_amp.yaml)
# amp_user: "amp"
# amp_home: "/home/amp"
# amp_versions_keep: 2
# amp_journal_max_age: "3d"

# =============================================================================
# DATABASE BACKUP — only for vars files used with backup_databases.yaml
# =============================================================================

# Database user and container name
# db_username: "postgres"
# db_container_name: "postgres"

# List of database names to dump
# db_names:
#   - "mydb1"
#   - "mydb2"

# Database engine flags — all default false via group_vars/all.yaml.
# Set only the flag for the engine this vars file targets.
# is_postgres: true
# is_influxdb: true

# Backup file extension — "sql.gz" for SQL engines (gzip-compressed), "tar.gz" for InfluxDB
# backup_ext: "sql.gz"

# Database password should be in vars/secrets.yaml (vault), not here
# db_password: "{{ my_db_password_from_vault }}"

# =============================================================================
# RESTORE SUPPORT — only needed if using restore/verify playbooks
# =============================================================================

# db_container_deps: maps each database name to dependent containers ON THE SAME HOST
# as the DB container. Used by restore_databases.yaml to stop/start only local containers.
# Cross-host deps (app container on a different host) should be [] — use
# restore_hosts.yaml -e with_databases=yes for coordinated cross-host restore.
#
# db_container_deps:
#   myapp_db: ["myapp-container"]
#   shared_db: []                   # app runs on a different host

# app_restore: maps app names to their containers, DB config, and DB host.
# Used by restore_hosts.yaml for selective app restore and coordinated DB+appdata restore.
# The app name must match the subdirectory under src_raw_files[0] in the backup archive.
#
# app_restore:
#   myapp:
#     containers: ["myapp-web", "myapp-worker"]   # all containers to stop/start
#     db_config_file: db_myhost_postgres           # vars file (without vars/ prefix and .yaml suffix)
#     db_host: myhost.example.com                  # inventory_hostname of the DB container host
#     db_names: ["myapp_main", "myapp_cache"]      # database names (must match backup filenames)
