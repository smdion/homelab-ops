# Keepalived VRRP config for the Proxmox management VIP (setup_pve_vip.yaml, maintain_pve.yaml).
# vault vars required: vault_pve_vip, vault_pve_vrrp_password,
#   vault_pve_vrrp_priorities (dict: short node name → priority; highest = MASTER — domain stripped automatically)
pve_vrrp_interface: "vmbr0"
pve_vrrp_router_id: 51
pve_vrrp_instance: "PVE_MGMT"
pve_vip_cidr: 24
pve_api_port: 8006

src_raw_files:
  - "/etc"
backup_name: "{{ 'PBS' if inventory_hostname in groups['pbs'] else ('PVE' if inventory_hostname in groups['pve'] else 'Proxmox') }}"
backup_description: "Automatic Proxmox Backup"
backup_type: "Appliances"
backup_subtype: "Config"
backup_file: "backup_{{ inventory_hostname }}_config_{{ ansible_date_time.date }}.tar.gz"
update_name: "Proxmox"
update_description: "Automatic Proxmox Update"
update_type: "Appliances"
update_subtype: "{{ 'PBS' if inventory_hostname in groups['pbs'] else 'PVE' }}"

pve_pool_production: "production"
pve_pool_test: "test"
pve_pool_hosted: "hosted"
pve_pool_hosted_vlan: 1682
# test VLAN uses vault_test_vlan_id (already in secrets.yaml)

# VMIDs to exclude from the production pool even if they match the no-VLAN rule.
# Use this for VMs that sit on the default VLAN but should not be backed up via PBS pool jobs.
pve_pool_exclude_vmids: []
